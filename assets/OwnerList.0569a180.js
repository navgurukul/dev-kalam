import{b9 as K,bf as re,bg as R,aI as $,j as e,aU as Q,a$ as ne,bp as O,bl as oe,bm as se,bn as me,bt as _,d3 as ue,bq as W,bw as P,bx as Y,by as S,d4 as L,bD as G,bi as de,bo as ce,r as T,bT as pe,cZ as be,bb as fe,cB as Ne,cC as xe,cD as ve,bB as A,bh as he,bk as ge,bd as De,bc as we}from"./vendor.0db79331.js";import{r as je,M as X,u as B,v as ye,w as Ee,x as Ve,y as Se,z as H,A as Oe}from"./index.83743980.js";import{a as I}from"./vendor_axios.5abceb0c.js";import"./vendor_core_js_pure.0c656a9d.js";import"./vendor_react_epic_spinners.9d092b60.js";import"./vendor_mui_datatables.7a9f4bd2.js";import"./vendor_lodash.50cc0a37.js";import"./vendor_react_slick.6e983608.js";import"./vendor_react_easy_edit.0ee73127.js";import"./vendor_react_player.4dedbcdd.js";var i="C:\\Users\\poona\\OneDrive\\Documents\\Poonam\\React\\Work\\kalam\\src\\components\\owner\\AddOwner.jsx";const M="https://dev-join.navgurukul.org/api/",Z=[{value:"EnglishInterview",label:"English Interview Pending (2nd Round)"},{value:"AlgebraInterview",label:"Algebra Interview Pending (3rd Round)"},{value:"CultureFitInterview",label:"Culture Fit Interview Pending (4th Round)"}],Ce=K(N=>({container:{display:"flex",flexWrap:"wrap",flexDirection:"column",maxWidth:400},root:{maxWidth:450,margin:"auto",marginTop:"20px"},addIcon:{position:"absolute",marginLeft:"60%",top:"9px"},text:{marginBottom:N.spacing(1)},btn:{}})),J=({updateOwners:N,isEdit:s,disabled:h,ownerData:w,ownerId:d})=>{const x=Ce(),{enqueueSnackbar:p}=re(),{users:y}=R(l=>l.owners),[E,r]=$.useState(!1),[b,a]=$.useState({name:null,id:d!=null?d:null,availablity:"",stage:[],limit:0,gender:""}),o=async l=>{var g,D;const n=(g=(await I.get(`${M}owner/${l}`)).data)==null?void 0:g.data[0];a({name:n.user.mail_id,gender:(D=n.gender)!=null?D:"",availablity:n.available,stage:n.type,limit:n.max_limit,id:n.id})},f=()=>{const{name:l,gender:t,id:n,availablity:g,stage:D,limit:V}=b;if(w.some(F=>F.user.mail_id===l)){p(`${l} exists in owner dashboard.`,{variant:"error"});return}l&&n&&t&&D&&g!==""&&V>0?I.post(`${M}owner`,{user_id:n,available:g==="Yes",max_limit:V?parseInt(V,10):void 0,type:D,gender:parseInt(t,10)}).then(F=>{p("Owner Successfull created !",{variant:"success"}),r(!1),N(F.data.data[0],!1)}):p("Please fill all fields",{variant:"error"})},c=async()=>{r(!0),s&&await o(d)},m=(l,t)=>{r(!1),!t&&a({name:null,id:d!=null?d:null,availablity:"",stage:[],limit:0,gender:""})},j=()=>{const{name:l,gender:t,id:n,availablity:g,stage:D,limit:V}=b;l&&n&&t&&D&&g!==""&&V>0?I.put(`${M}owner/${n}`,{available:g,max_limit:parseInt(V,10),type:D,gender:parseInt(t,10)}).then(k=>{p("Owner Successfull updated!",{variant:"success"}),m(),N(k.data.data[0],!0)}).catch(k=>{console.error(k.message),p("Interviews limit  should not be 10",{variant:"error"}),r(!1)}):p("Please fill all fields",{variant:"error"})},C=l=>{l.target.name==="name"?a({...b,name:l.target.label,id:l.target.value}):a({...b,[l.target.name]:l.target.value})},ee=l=>{const{target:{value:t}}=l;a({...b,stage:typeof t=="string"?t.split(","):t})},le=l=>{a(t=>({...t,stage:t.stage.filter(n=>n!==l)}))},{name:q,gender:ae,availablity:ie,stage:z,limit:te}=b;return e.exports.jsxDEV(e.exports.Fragment,{children:[s?e.exports.jsxDEV(Q,{disabled:h,onClick:c,children:e.exports.jsxDEV(ne,{},void 0,!1,{fileName:i,lineNumber:213,columnNumber:11},void 0)},void 0,!1,{fileName:i,lineNumber:212,columnNumber:9},void 0):e.exports.jsxDEV(O,{variant:"contained",color:"primary",onClick:c,className:x.btn,disabled:h,children:"Add Owner"},void 0,!1,{fileName:i,lineNumber:216,columnNumber:9},void 0),e.exports.jsxDEV(oe,{open:E,onClose:m,children:[e.exports.jsxDEV(se,{children:"Add New Owner"},void 0,!1,{fileName:i,lineNumber:227,columnNumber:9},void 0),e.exports.jsxDEV(me,{sx:{display:"flex",flexDirection:"column",gap:3},children:[e.exports.jsxDEV(_,{sx:{pt:"0.4rem"},children:e.exports.jsxDEV(ue,{name:"name",value:q,onChange:(l,t)=>C({target:{name:"name",label:t.label,value:t.value}}),options:y.map(l=>({value:l.id,label:l.user})),isOptionEqualToValue:(l,t)=>l.label===t,placeholder:"Select Owner",renderInput:l=>e.exports.jsxDEV(W,{label:"Select Owner",helperText:"Please Select Owner",...l},void 0,!1,{fileName:i,lineNumber:248,columnNumber:17},void 0)},void 0,!1,{fileName:i,lineNumber:232,columnNumber:13},void 0)},void 0,!1,{fileName:i,lineNumber:231,columnNumber:11},void 0),e.exports.jsxDEV(_,{children:[e.exports.jsxDEV(P,{children:"Select Gender"},void 0,!1,{fileName:i,lineNumber:258,columnNumber:13},void 0),e.exports.jsxDEV(Y,{name:"gender",value:ae,onChange:C,placeholder:"Select Gender",label:"Select Gender",children:[e.exports.jsxDEV(S,{value:"",disabled:!0,children:"Select an Option"},void 0,!1,{fileName:i,lineNumber:266,columnNumber:15},void 0),Object.entries(je).map(([l,t])=>e.exports.jsxDEV(S,{value:l,children:t},l,!1,{fileName:i,lineNumber:270,columnNumber:17},void 0))]},void 0,!0,{fileName:i,lineNumber:259,columnNumber:13},void 0),e.exports.jsxDEV(L,{className:x.text,id:"my-helper-text",children:"Please select your gender"},void 0,!1,{fileName:i,lineNumber:275,columnNumber:13},void 0)]},void 0,!0,{fileName:i,lineNumber:257,columnNumber:11},void 0),e.exports.jsxDEV(_,{children:[e.exports.jsxDEV(P,{children:"Select Availability"},void 0,!1,{fileName:i,lineNumber:281,columnNumber:13},void 0),e.exports.jsxDEV(Y,{name:"availablity",value:ie,onChange:C,placeholder:"Select Availablity",children:[e.exports.jsxDEV(S,{value:"",disabled:!0,children:"Select an Option"},void 0,!1,{fileName:i,lineNumber:288,columnNumber:15},void 0),[{value:!0,label:"Yes"},{value:!1,label:"No"}].map(({value:l,label:t})=>e.exports.jsxDEV(S,{value:l,children:t},l,!1,{fileName:i,lineNumber:295,columnNumber:17},void 0))]},void 0,!0,{fileName:i,lineNumber:282,columnNumber:13},void 0),e.exports.jsxDEV(L,{className:x.text,id:"my-helper-text",children:"Select Yes/No"},void 0,!1,{fileName:i,lineNumber:300,columnNumber:13},void 0)]},void 0,!0,{fileName:i,lineNumber:280,columnNumber:11},void 0),e.exports.jsxDEV(_,{children:[e.exports.jsxDEV(P,{children:"Select Stage"},void 0,!1,{fileName:i,lineNumber:306,columnNumber:13},void 0),e.exports.jsxDEV(Y,{name:"stage",label:"Select Stage",placeholder:"Select Stage",value:z,multiple:!0,onChange:ee,renderValue:l=>e.exports.jsxDEV(G,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:l.map(t=>e.exports.jsxDEV(de,{onMouseDown:n=>{n.stopPropagation()},label:Z.find(n=>n.value===t).label,onDelete:()=>le(t)},t,!1,{fileName:i,lineNumber:317,columnNumber:21},void 0))},void 0,!1,{fileName:i,lineNumber:315,columnNumber:17},void 0),children:[e.exports.jsxDEV(S,{value:"",disabled:!0,children:"Select an Option"},void 0,!1,{fileName:i,lineNumber:333,columnNumber:15},void 0),Z.filter(({value:l})=>!z.includes(l)).map(({label:l,value:t})=>e.exports.jsxDEV(S,{value:t,children:l},t,!1,{fileName:i,lineNumber:339,columnNumber:19},void 0))]},void 0,!0,{fileName:i,lineNumber:307,columnNumber:13},void 0),e.exports.jsxDEV(L,{className:x.text,id:"my-helper-text",children:"Stage select kariye jo aap owner ko assign karna chahate ho."},void 0,!1,{fileName:i,lineNumber:344,columnNumber:13},void 0)]},void 0,!0,{fileName:i,lineNumber:305,columnNumber:11},void 0),e.exports.jsxDEV(W,{type:"number",id:"limit",name:"limit",label:"Interview Limit",placeholder:"Interview Limit",value:te,onChange:C,helperText:"Ek student kitne interviews le sakta hai."},void 0,!1,{fileName:i,lineNumber:349,columnNumber:11},void 0)]},void 0,!0,{fileName:i,lineNumber:228,columnNumber:9},void 0),e.exports.jsxDEV(ce,{children:[e.exports.jsxDEV(O,{variant:"outlined",color:"primary",onClick:m,children:"Cancel"},void 0,!1,{fileName:i,lineNumber:361,columnNumber:11},void 0),e.exports.jsxDEV(O,{variant:"contained",color:"primary",onClick:s?j:f,className:x.btn,disabled:s&&!q,children:`${s?"Update":"Add"} Owner`},void 0,!1,{fileName:i,lineNumber:364,columnNumber:11},void 0)]},void 0,!0,{fileName:i,lineNumber:360,columnNumber:9},void 0)]},void 0,!0,{fileName:i,lineNumber:226,columnNumber:7},void 0)]},void 0,!0)};var v="C:\\Users\\poona\\OneDrive\\Documents\\Poonam\\React\\Work\\kalam\\src\\components\\owner\\OwnerSchedule.jsx";const ke="https://dev-join.navgurukul.org/api/";function _e(N){const{scheduleOpen:s,setScheduleOpen:h}=N,w=[{name:"name",label:"Name",options:{filter:!1,sort:!1}},{name:"phone",label:"Phone No.",options:{filter:!1,sort:!1}},{name:"email",label:"Email",options:{filter:!1,sort:!1}},{name:"start_time",label:"Start Time",options:{filter:!1,sort:!1,customBodyRender:r=>A(r,"hh:mm").format("hh:mm A")}},{name:"end_time_expected",label:"Expected End Time",options:{filter:!1,sort:!1,customBodyRender:r=>A(r,"hh:mm").format("hh:mm A")}},{name:"on_date",label:"Date",options:{filter:!0,sort:!0,customBodyRender:r=>A(r).format("D MMM YYYY")}},{name:"owner",label:"Owner Name",options:{filter:!0,sort:!0}},{name:"topic_name",label:"Topic Name",options:{filter:!0,sort:!0}}],[d,x]=T.exports.useState([]),[p,y]=T.exports.useState(new Date),E=r=>{const b=A(r);if(!b.isValid())return;const a=b.format("YYYY-MM-DD");I.get(`${ke}/slot/interview/ondate/${a}`).then(({data:o})=>{const f=o.data.map(c=>{var m;return{...c,name:c.student.name,email:c.student.email,phone:c.contacts.mobile,owner:((m=c.user)==null?void 0:m.user_name)||""}});y(a),x(f)})};return T.exports.useEffect(()=>{E(p)},[]),e.exports.jsxDEV(pe,{open:s,onClose:()=>h(!1),sx:{height:"85%",marginTop:"1.4rem",width:"99%",mx:"1.2rem",overflow:"scroll"},children:e.exports.jsxDEV(be,{sx:{py:"1.2rem",px:"0.8rem"},children:[e.exports.jsxDEV(fe,{variant:"h3",textAlign:"center",fontWeight:"medium",children:"Interview Schedule"},void 0,!1,{fileName:v,lineNumber:121,columnNumber:9},this),e.exports.jsxDEV(G,{sx:{display:"flex",flexDirection:"column",gap:2},children:[e.exports.jsxDEV(G,{sx:{display:"flex",justifyContent:"center"},children:e.exports.jsxDEV(Ne,{dateAdapter:xe,children:e.exports.jsxDEV(ve,{margin:"normal",format:"MM/dd/yyyy",value:p,onChange:r=>E(r),inputVariant:"outlined",renderInput:r=>e.exports.jsxDEV(W,{...r},void 0,!1,{fileName:v,lineNumber:133,columnNumber:42},this)},void 0,!1,{fileName:v,lineNumber:127,columnNumber:15},this)},void 0,!1,{fileName:v,lineNumber:126,columnNumber:13},this)},void 0,!1,{fileName:v,lineNumber:125,columnNumber:11},this),e.exports.jsxDEV(X,{title:"Schedule",columns:w,data:d},void 0,!1,{fileName:v,lineNumber:137,columnNumber:11},this)]},void 0,!0,{fileName:v,lineNumber:124,columnNumber:9},this)]},void 0,!0,{fileName:v,lineNumber:120,columnNumber:7},this)},void 0,!1,{fileName:v,lineNumber:109,columnNumber:5},this)}var u="C:\\Users\\poona\\OneDrive\\Documents\\Poonam\\React\\Work\\kalam\\src\\components\\owner\\OwnerList.jsx";const Ae=K(()=>({innerTable:{marginLeft:"3vw",marginRight:"3vw",width:"80vw",marginTop:"5",marginBottom:"5",[B.breakpoints.up("md")]:{margin:"auto",marginTop:5,marginBottom:5}},buttons:{display:"flex",gap:B.spacing(2),margin:B.spacing(2)}})),U={defaultValue:"#F0E5D8",EnglishInterview:"#FFC478",AlgebraInterview:"#EFB7B7",CultureFitInterview:"#75CFB8"},Ue=()=>{const N=Ae(),s=he(),{loggedInUser:h,privileges:w}=R(a=>a.auth),{ownerData:d}=R(a=>a.owners),{isFetching:x}=R(a=>a.ui),[p,y]=$.useState(!1),E=[{name:"id",label:"Edit",options:{filter:!1,sort:!1,customBodyRender:$.useCallback((a,o)=>{const f=(h==null?void 0:h.mail_id)||null,c=w.some(j=>j.privilege==="UpdateOwner")||o.rowData[1]===f,m=(w.some(j=>j.privilege==="DeleteOwner")||o.rowData[1]===f)&&o.rowData[4]===0;return e.exports.jsxDEV("div",{style:{display:"flex",margin:"10px",justifyContent:"space-between"},children:[e.exports.jsxDEV(J,{ownerId:a,isEdit:!0,disabled:!c,updateOwners:r},void 0,!1,{fileName:u,lineNumber:79,columnNumber:15},void 0),e.exports.jsxDEV(Q,{disabled:!m,onClick:()=>s(ye({title:`Do you want to delete owner ${o.rowData[1].mail_id} ??`,actions:e.exports.jsxDEV(O,{onClick:()=>{b(a),s(Ee())},color:"primary",variant:"contained",children:"Confirm"},void 0,!1,{fileName:u,lineNumber:93,columnNumber:25},void 0)})),children:e.exports.jsxDEV(ge,{color:m?"error":"",style:{cursor:"pointer"}},void 0,!1,{fileName:u,lineNumber:108,columnNumber:17},void 0)},void 0,!1,{fileName:u,lineNumber:86,columnNumber:15},void 0)]},void 0,!0,{fileName:u,lineNumber:72,columnNumber:13},void 0)},[])}},{name:"user",label:"Name",options:{filter:!0,sort:!0,customBodyRender:a=>a.mail_id}},{name:"gender",label:"Gender",options:{filter:!0,sort:!0,customBodyRender:a=>a===1?"Female":a===2?"Male":a===3?"Transgender":"N/A"}},{name:"available",label:"Available",options:{filter:!0,sort:!1,customBodyRender:a=>a?"Yes":"No"}},{name:"pending_interview_count",label:"Pending Interviews",options:{filter:!1,sort:!0}},{name:"type",label:"Interview Types",options:{filter:!1,sort:!1,customBodyRender:a=>a.map(o=>U[o]?e.exports.jsxDEV("p",{style:{backgroundColor:U[o],textAlign:"center",borderRadius:"75px"},children:[" ",o," "]},o,!0,{fileName:u,lineNumber:168,columnNumber:17},void 0):e.exports.jsxDEV("p",{style:{backgroundColor:U.defaultValue,textAlign:"center",borderRadius:"75px"},children:[" ",o," "]},o,!0,{fileName:u,lineNumber:182,columnNumber:15},void 0))}},{name:"max_limit",label:"Assigned Interviews Limit",options:{filter:!1,sort:!0}}];T.exports.useEffect(()=>{s(Ve()),s(Se())},[]);const r=(a,o)=>{if(o){const f=[...d],c=f.findIndex(j=>j.id===a.id),m={...f[c]};m.available=a.available,m.type=a.type,m.max_limit=a.max_limit,m.gender=a.gender,f[c]=m,s(H(f))}else s(H([a,...d]))},b=a=>{s(Oe({ownerId:a}))};return e.exports.jsxDEV(De,{mt:2,children:e.exports.jsxDEV(we,{theme:B,children:e.exports.jsxDEV("div",{className:N.innerTable,children:[e.exports.jsxDEV("div",{className:N.buttons,children:[e.exports.jsxDEV(J,{disabled:!w.some(a=>a.privilege==="AddOwner"),updateOwners:r,ownerData:d},void 0,!1,{fileName:u,lineNumber:258,columnNumber:13},void 0),e.exports.jsxDEV(O,{variant:"contained",color:"primary",onClick:()=>y(!0),className:N.btn,children:"Interview Schedule"},void 0,!1,{fileName:u,lineNumber:265,columnNumber:13},void 0)]},void 0,!0,{fileName:u,lineNumber:257,columnNumber:11},void 0),e.exports.jsxDEV(_e,{setScheduleOpen:y,scheduleOpen:p},void 0,!1,{fileName:u,lineNumber:274,columnNumber:11},void 0),e.exports.jsxDEV(X,{title:"Owners",columns:E,data:d,showLoader:x},void 0,!1,{fileName:u,lineNumber:278,columnNumber:11},void 0)]},void 0,!0,{fileName:u,lineNumber:256,columnNumber:9},void 0)},void 0,!1,{fileName:u,lineNumber:255,columnNumber:7},void 0)},void 0,!1,{fileName:u,lineNumber:254,columnNumber:5},void 0)};export{Ue as default};
