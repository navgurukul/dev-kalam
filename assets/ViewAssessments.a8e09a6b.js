import{b9 as w,bf as S,aI as l,j as e,ck as C,bT as j,bp as h,b_ as R,cS as $,bD as U}from"./vendor.0db79331.js";import{M as _}from"./vendor_mui_datatables.7a9f4bd2.js";import{a as y}from"./vendor_axios.5abceb0c.js";import{R as A}from"./vendor_react_json_view.cf83d3c4.js";import{t as B}from"./index.83743980.js";import"./vendor_core_js_pure.0c656a9d.js";import"./vendor_lodash.50cc0a37.js";import"./vendor_react_epic_spinners.9d092b60.js";import"./vendor_react_slick.6e983608.js";import"./vendor_react_easy_edit.0ee73127.js";import"./vendor_react_player.4dedbcdd.js";var r="C:\\Users\\poona\\OneDrive\\Documents\\Poonam\\React\\Work\\kalam\\src\\components\\smallComponents\\Uploadcsv.jsx";const D="https://dev-join.navgurukul.org/api/",L=w(o=>({innerTable:{marginLeft:"3vw",marginRight:"3vw",width:"94vw",marginTop:"5",marginBottom:"5",[o.breakpoints.up("md")]:{margin:"auto",width:"50%",marginTop:5,marginBottom:5}},clear:{clear:"both"}})),T=()=>({marginLeft:"auto",marginRight:"auto",maxWidth:"85vh",backgroundColor:"white",border:"2px solid rgb(0, 0, 0)",marginTop:"4vw",overflow:"auto",maxHeight:"92vh",padding:"20px"}),I=({partnerId:o,assessmentId:u})=>{const b=L(),{enqueueSnackbar:p}=S(),[f,v]=l.useState(!1),[c,d]=l.useState(null),x=async a=>{try{if(a){const i=`${D}partners/${o}/assessments/${u}/attempts`,m=await y.post(i,{csvUrl:a});m.data.errors!==void 0?d(m.data):p("successfully uploaded csv file!",{variant:"success"}),v(!1)}}catch{p("Internal Server Error",{variant:"error"})}},N=()=>{if(typeof c=="object")return e.exports.jsxDEV("div",{children:[e.exports.jsxDEV("h3",{style:{color:"green",textAlign:"center"},children:"Please coreect your csv file according to the detailsErrors and answerErrors using following instructions."},void 0,!1,{fileName:r,lineNumber:74,columnNumber:11},void 0),e.exports.jsxDEV(A,{src:c},void 0,!1,{fileName:r,lineNumber:78,columnNumber:11},void 0)]},void 0,!0,{fileName:r,lineNumber:73,columnNumber:9},void 0)},g=async a=>{const i=`${D}general/upload_file/answerCSV`,m=new FormData;m.append("file",a);const V={headers:{"content-type":"multipart/form-data"}};return y.post(i,m,V)},s=async a=>{g(a).then(i=>{try{i.data.errors===void 0?x(i.data.fileUrl):alert("It is enternal server error please refresh the page.")}catch(m){console.error(m)}})},n=async a=>{v(!0),await s(a.target.files[0])},k=()=>d(null),E=T();return e.exports.jsxDEV(e.exports.Fragment,{children:[e.exports.jsxDEV("div",{style:{padding:"10px"},children:[e.exports.jsxDEV("h3",{children:"File Upload"},void 0,!1,{fileName:r,lineNumber:122,columnNumber:9},void 0),e.exports.jsxDEV("input",{type:"file",accept:".csv",onChange:n,style:{color:"green"}},void 0,!1,{fileName:r,lineNumber:123,columnNumber:9},void 0),e.exports.jsxDEV(C,{size:35,spinnerColor:"#ed343d",spinnerWidth:5,visible:f,style:{padding:"10px"}},void 0,!1,{fileName:r,lineNumber:129,columnNumber:9},void 0)]},void 0,!0,{fileName:r,lineNumber:121,columnNumber:7},void 0),e.exports.jsxDEV(j,{open:!!c,onClose:k,children:e.exports.jsxDEV("div",{style:E,className:b.errors,children:N()},void 0,!1,{fileName:r,lineNumber:138,columnNumber:9},void 0)},void 0,!1,{fileName:r,lineNumber:137,columnNumber:7},void 0)]},void 0,!0)};var t="C:\\Users\\poona\\OneDrive\\Documents\\Poonam\\React\\Work\\kalam\\src\\components\\assessment\\ViewAssessments.jsx";const M="https://dev-join.navgurukul.org/api/",F=()=>({top:`${54}%`,left:`${50}%`,transform:`translate(-${54}%, -${50}%)`,overflowY:"scroll",maxHeight:"80vh",width:"75%"}),O=w(o=>({paper:{position:"absolute",marginLeft:"3vw",marginRight:"3vw",width:"94vw",[o.breakpoints.up("md")]:{margin:"auto",width:"50%"},backgroundColor:o.palette.background.paper,boxShadow:o.shadows[5],padding:o.spacing(4),outline:"none"}})),Z=({partnerId:o})=>{const u=O(),[b,p]=l.useState([]),[f,v]=l.useState(!1),c=[{label:"ID",name:"id",options:{filter:!1}},{label:"Name",name:"name",options:{filter:!1}},{label:"Assessment URL",name:"assessment_url",options:{filter:!1,customBodyRender:l.useCallback(s=>s?e.exports.jsxDEV("a",{target:"_blank",rel:"noreferrer",href:s,children:e.exports.jsxDEV(h,{variant:"text",size:"small",color:"primary",children:"Link to Assessment"},void 0,!1,{fileName:t,lineNumber:73,columnNumber:17},void 0)},void 0,!1,{fileName:t,lineNumber:72,columnNumber:15},void 0):null,[])}},{label:"Answer Key URL",name:"answer_key_url",options:{filter:!1,customBodyRender:l.useCallback(s=>s?[]:null)}},{label:"Question Set ID",name:"question_set_id",options:{filter:!1,customBodyRender:l.useCallback(s=>{const n=`/partner/${o}/assessments/${s}`;return e.exports.jsxDEV(R,{to:n,children:e.exports.jsxDEV(h,{variant:"text",color:"primary",size:"small",children:s},void 0,!1,{fileName:t,lineNumber:110,columnNumber:15},void 0)},void 0,!1,{fileName:t,lineNumber:109,columnNumber:13},void 0)},[])}},{label:"Created At",name:"created_at",options:{filter:!1}},{label:"Upload Data",name:"partner_id",options:{filter:!1,customBodyRender:l.useCallback((s,n)=>e.exports.jsxDEV(I,{partnerId:s,assessmentId:n.rowData[0]},void 0,!1,{fileName:t,lineNumber:132,columnNumber:13},void 0),[])}}],d=()=>v(s=>!s),x=async()=>{try{const s=`${M}partners/${o}/assessments`,n=await y.get(s);p(n.data.data)}catch(s){console.error(s)}},N=()=>{x(),d()},g=F();return f?e.exports.jsxDEV(j,{open:f,onClose:d,children:e.exports.jsxDEV(U,{style:g,className:u.paper,children:e.exports.jsxDEV(_,{title:"View Assessments",columns:c,data:b,icons:B,options:{exportButton:!0,pageSize:100,showTitle:!1,selectableRows:"none",toolbar:!1,filtering:!0,filter:!0,filterType:"dropdown",responsive:"vertical"},style:{maxWidth:"90%",margin:"0 auto",marginTop:25}},void 0,!1,{fileName:t,lineNumber:177,columnNumber:9},void 0)},void 0,!1,{fileName:t,lineNumber:167,columnNumber:7},void 0)},void 0,!1,{fileName:t,lineNumber:166,columnNumber:5},void 0):e.exports.jsxDEV(h,{color:"primary",align:"right",onClick:N,children:[e.exports.jsxDEV($,{color:"primary"},void 0,!1,{fileName:t,lineNumber:162,columnNumber:7},void 0),"\xA0\xA0"]},void 0,!0,{fileName:t,lineNumber:161,columnNumber:5},void 0)};export{Z as default};
