import{j as o,aT as ne,aU as M,aV as ie,bE as T,bg as re,bh as ce,r as f,aI as j,bs as k,bd as ue,bl as W,bn as me,bW as de,bt as pe,bw as fe,d0 as ve,d1 as be,bq as A,bo as xe,bp as Ne,cd as he,bf as ge,bu as De,b9 as je,d2 as Se,bD as ye,bb as Ee}from"./vendor.0db79331.js";import{M as Ce}from"./vendor_mui_datatables.7a9f4bd2.js";import{a as D}from"./vendor_axios.5abceb0c.js";import{o as I,M as Ve,d as we,e as Oe,q as Fe,c as ke,g as L,h as Re,k as $e,l as _e}from"./index.83743980.js";var R="C:\\Users\\poona\\OneDrive\\Documents\\Poonam\\React\\Work\\kalam\\src\\components\\dashboard\\ToolbarAddButtonOverview.jsx";const Te=({handleOpen:l,disabled:m})=>o.exports.jsxDEV(ne,{title:"Add schools",children:o.exports.jsxDEV(M,{disabled:m,onClick:l,children:o.exports.jsxDEV(ie,{},void 0,!1,{fileName:R,lineNumber:9,columnNumber:7},void 0)},void 0,!1,{fileName:R,lineNumber:8,columnNumber:5},void 0)},void 0,!1,{fileName:R,lineNumber:7,columnNumber:3},void 0);var t="C:\\Users\\poona\\OneDrive\\Documents\\Poonam\\React\\Work\\kalam\\src\\components\\dashboard\\OverviewData.jsx";const y="https://dev-join.navgurukul.org/api/",Ge=({url:l,isCampus:m=!1})=>{const x=T(),{allStudents:v,fromDate:p,toDate:N,allStatusCount:h}=re(e=>e.campus),r=ce(),[d,n]=f.exports.useState(!1),g=()=>r(ke(!1)),E=e=>r($e(e)),S=e=>r(we(e)),B=e=>r(_e(e)),U=()=>r(Oe()),q=[{name:"id",label:"S.No",options:{filter:!0,sort:!0,customBodyRender:(e,a)=>a.rowIndex+1}},{name:"name",label:"School Name",options:{filter:!0,sort:!0,customBodyRender:(e,a)=>e}},{name:"capacity",label:"Capacity of students",options:{filter:!0,sort:!0,customBodyRender:(e,a)=>e}}],[P,G]=f.exports.useState([]),[Y,z]=f.exports.useState([]),[C,H]=f.exports.useState(""),[V,X]=f.exports.useState(""),w=T().pathname.split("/")[2],$=async()=>{const e=`${y}school/campus_school/${w}`,a=await D.get(e);G(a==null?void 0:a.data)};f.exports.useEffect(()=>{$()},[]);const J=async()=>{if(V&&C&&w){const e=`${y}school/capacity?campus_id=${w}&school_id=${C}`;await D.put(e,{capacityofschool:V})}n(!1),$()},Q=async()=>{const e=`${y}school`,a=await D.get(e);z(a.data)},Z=()=>{n(!0)},_={selectableRows:"none",responsive:"vertical",filter:!1,customToolbar:j.useCallback(()=>o.exports.jsxDEV(Te,{handleOpen:Z},void 0,!1,{fileName:t,lineNumber:131,columnNumber:13},void 0),[])},[K,ee]=j.useState(!0),oe=e=>{if(m){const u=L.reduce((i,s)=>({...i,[s]:0}),{total:0}),c=e.reduce((i,s)=>(s.stage.campus_status&&L.includes(s.stage.campus_status)&&(i[s.stage.campus_status]+=1),i),u);c.total=e.length,E(c)}const a=e.map(u=>Re(u,m));S(a),B(a),ee(!1)},te=async e=>{try{const a=y+l,u=await D.get(a,{signal:e,params:{from:p,to:N}}),c={},i=u.data.data.map(s=>{const O=s.lastTransition?s.lastTransition.to_stage:"other",F=s.contacts[s.contacts.length-1];return c[O]?c[O]+=1:c[O]=1,{...s,qualification:Fe[s.qualification],altNumber:F&&F.alt_mobile,donor:s.studentDonor?s.studentDonor:null}});i.length>0&&(i[0]={...i[0],...c}),oe(i)}catch{g()}};f.exports.useEffect(()=>{const e=new AbortController;return(async()=>await te(e.signal))(),()=>{e.abort(),S([]),U()}},[]);const ae=x.pathname.split("/")[1],se=j.useCallback(()=>o.exports.jsxDEV("tbody",{},void 0,!1,{fileName:t,lineNumber:216,columnNumber:44},void 0),[]),le=v.length>0&&o.exports.jsxDEV(k,{container:!0,spacing:3,sx:{paddingY:"0.8rem"},children:[o.exports.jsxDEV(k,{item:!0,container:!0,xs:12,md:6,lg:3,sx:{display:"flex",flexDirection:"column",justifyContent:"center",width:"100%"}},void 0,!1,{fileName:t,lineNumber:220,columnNumber:7},void 0),o.exports.jsxDEV(k,{item:!0,xs:12,md:12,lg:6,children:o.exports.jsxDEV(Ce,{columns:Object.keys(h).map(e=>{var a,u,c,i;return{name:e,label:(u=(a=I[e])==null?void 0:a.label)!=null?u:"Total",options:{display:(i=(c=I[e])==null?void 0:c.display)!=null?i:!0}}}),title:"Campus Counts",data:[h],options:{customFooter:se,filter:!1,sort:!1,showTitle:!1,viewColumns:!0,print:!1,search:!1,selectableRows:"none",toolbar:!1}},void 0,!1,{fileName:t,lineNumber:235,columnNumber:9},void 0)},void 0,!1,{fileName:t,lineNumber:234,columnNumber:7},void 0)]},void 0,!0,{fileName:t,lineNumber:219,columnNumber:5},void 0);return o.exports.jsxDEV(ue,{sx:{paddingX:"30rem",paddingY:"0.2rem"},children:[ae==="campus"?le:_,o.exports.jsxDEV(Ve,{tableBodyMaxHeight:"56vh",title:"Programs offered",columns:q,data:P,showLoader:K,options:_},void 0,!1,{fileName:t,lineNumber:263,columnNumber:7},void 0),o.exports.jsxDEV(W,{fullWidth:!0,open:d,onClose:()=>n(!1),children:o.exports.jsxDEV("section",{style:{padding:"0rem 1rem 1rem 1rem"},children:[o.exports.jsxDEV(me,{children:[o.exports.jsxDEV("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[o.exports.jsxDEV("p",{style:{fontSize:"24px"},children:"Add School"},void 0,!1,{fileName:t,lineNumber:285,columnNumber:15},void 0),o.exports.jsxDEV(de,{style:{cursor:"pointer"},onClick:()=>n(!1)},void 0,!1,{fileName:t,lineNumber:286,columnNumber:15},void 0)]},void 0,!0,{fileName:t,lineNumber:278,columnNumber:13},void 0),o.exports.jsxDEV(pe,{fullWidth:!0,children:[o.exports.jsxDEV(fe,{label:"school add",variant:"outlined",htmlFor:"uncontrolled-native",children:"Schools"},void 0,!1,{fileName:t,lineNumber:292,columnNumber:15},void 0),o.exports.jsxDEV(ve,{defaultValue:30,input:o.exports.jsxDEV(be,{label:"Name"},void 0,!1,{fileName:t,lineNumber:301,columnNumber:24},void 0),onClick:Q,value:C,onChange:e=>{e.preventDefault(),H(e.target.value)},children:Y.map(e=>o.exports.jsxDEV("option",{value:e.id,children:[" ",e.name]},e.id,!0,{fileName:t,lineNumber:310,columnNumber:19},void 0))},void 0,!1,{fileName:t,lineNumber:299,columnNumber:15},void 0)]},void 0,!0,{fileName:t,lineNumber:291,columnNumber:13},void 0),o.exports.jsxDEV("div",{children:o.exports.jsxDEV(A,{fullWidth:!0,autoFocus:!0,label:"No of Students",placeholder:"Enter School",variant:"outlined",sx:{mt:"2rem"},value:V,onChange:e=>{e.preventDefault(),X(e.target.value)}},void 0,!1,{fileName:t,lineNumber:318,columnNumber:15},void 0)},void 0,!1,{fileName:t,lineNumber:317,columnNumber:13},void 0)]},void 0,!0,{fileName:t,lineNumber:277,columnNumber:11},void 0),o.exports.jsxDEV(xe,{style:{display:"flex",justifyContent:"center"},children:o.exports.jsxDEV(Ne,{variant:"contained",color:"primary",style:{width:"94%",padding:".5rem"},onClick:J,children:"Add School"},void 0,!1,{fileName:t,lineNumber:339,columnNumber:13},void 0)},void 0,!1,{fileName:t,lineNumber:333,columnNumber:11},void 0)]},void 0,!0,{fileName:t,lineNumber:276,columnNumber:9},void 0)},void 0,!1,{fileName:t,lineNumber:271,columnNumber:7},void 0)]},void 0,!0,{fileName:t,lineNumber:261,columnNumber:5},void 0)};var Ie="C:\\Users\\poona\\OneDrive\\Documents\\Poonam\\React\\Work\\kalam\\src\\components\\smallComponents\\EvaluationSelect.jsx";const Le="https://dev-join.navgurukul.org/api/",Me=he(),Ye=({evaluation:l,rowMetatable:m,change:x})=>{const{enqueueSnackbar:v}=ge(),p=n=>{const g=m.rowData[0],{value:E,label:S}=n;D.put(`${Le}students/${g}`,{evaluation:E}).then(()=>{v("evaluation is successfully added!",{variant:"success"}),x(S)}).catch(()=>{v("Something went wrong!",{variant:"error"})})},N=async n=>{const{value:g}=n;g&&p(n)},r=["Struggling","Manageable","Good","Excellent"].map(n=>({label:n,value:n})),d={value:l,label:l};return o.exports.jsxDEV(De,{className:"filterSelectStage",value:d,onChange:N,options:r,isClearable:!1,components:Me,closeMenuOnSelect:!0},void 0,!1,{fileName:Ie,lineNumber:52,columnNumber:5},void 0)};var b="C:\\Users\\poona\\OneDrive\\Documents\\Poonam\\React\\Work\\kalam\\src\\components\\campus\\FlagModal.jsx";const We=je(l=>({container:{display:"flex",flexWrap:"wrap",flexDirection:"column",maxWidth:400},textField:{marginLeft:l.spacing(1),marginRight:l.spacing(1),width:400},btn:{marginTop:l.spacing(4)}})),ze=({comment:l})=>{const m=We(),[x,v]=j.useState(!1),[p,N]=j.useState(l),h=d=>N(d.target.value.length===0?d.target.value:""),r=()=>{v(d=>!d)};return o.exports.jsxDEV(o.exports.Fragment,{children:[o.exports.jsxDEV(M,{onClick:r,children:o.exports.jsxDEV(Se,{sx:{color:`${l?"red":"green"}`}},void 0,!1,{fileName:b,lineNumber:41,columnNumber:9},void 0)},void 0,!1,{fileName:b,lineNumber:40,columnNumber:7},void 0),o.exports.jsxDEV(W,{open:x,onClose:r,children:o.exports.jsxDEV(ye,{sx:{py:"0.6rem",px:"0.2rem"},children:[o.exports.jsxDEV(Ee,{variant:"h4",fontWeight:"medium",color:"primary",textAlign:"center",sx:{my:"0.2rem"},children:"Raised Flag"},void 0,!1,{fileName:b,lineNumber:49,columnNumber:11},void 0),o.exports.jsxDEV(A,{focused:!0,id:"outlined-multiline-static",label:"Raised Flag Comments",placeholder:"No Red Flag Raised",multiline:!0,readOnly:!0,rows:"4",name:"redFlag",defaultValue:p!=null?p:"No Red Flag Raised",onChange:h,className:m.textField,margin:"normal",variant:"outlined",inputProps:{readOnly:!0}},void 0,!1,{fileName:b,lineNumber:60,columnNumber:11},void 0)]},void 0,!0,{fileName:b,lineNumber:48,columnNumber:9},void 0)},void 0,!1,{fileName:b,lineNumber:47,columnNumber:7},void 0)]},void 0,!0)};export{Ye as E,Ge as O,ze as R};
