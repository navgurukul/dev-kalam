import{j as e,aT as w,aU as R,aV as L,bg as I,aI as u,r as d,bf as U,ba as W,bl as T,bn as A,bW as B,bq as _,bo as $,bp as F,b_ as O}from"./vendor.0db79331.js";import{a as x}from"./vendor_axios.5abceb0c.js";import{M as P}from"./index.83743980.js";import"./vendor_core_js_pure.0c656a9d.js";import"./vendor_react_epic_spinners.9d092b60.js";import"./vendor_mui_datatables.7a9f4bd2.js";import"./vendor_lodash.50cc0a37.js";import"./vendor_react_slick.6e983608.js";import"./vendor_react_easy_edit.0ee73127.js";import"./vendor_react_player.4dedbcdd.js";var f="C:\\Users\\poona\\OneDrive\\Documents\\Poonam\\React\\Work\\kalam\\src\\components\\school\\ToolbarAddButtonSchool.jsx";const q=({handleOpen:l,disabled:s})=>e.exports.jsxDEV(w,{title:"Add new schools",children:e.exports.jsxDEV(R,{disabled:s,onClick:l,children:e.exports.jsxDEV(L,{},void 0,!1,{fileName:f,lineNumber:9,columnNumber:7},void 0)},void 0,!1,{fileName:f,lineNumber:8,columnNumber:5},void 0)},void 0,!1,{fileName:f,lineNumber:7,columnNumber:3},void 0);var o="C:\\Users\\poona\\OneDrive\\Documents\\Poonam\\React\\Work\\kalam\\src\\components\\school\\SchoolData.jsx";const v="https://dev-join.navgurukul.org/api/",M=[{name:"id",label:"S.No",options:{filter:!0,sort:!0,customBodyRender:(l,s)=>s.rowIndex+1}},{name:"name",label:"Schools",options:{filter:!0,sort:!0,customBodyRender:(l,s)=>{const i=`/school/${s.rowData[0]}/school-stages`;return e.exports.jsxDEV(O,{to:i,style:{color:"#f05f40"},children:l},void 0,!1,{fileName:o,lineNumber:44,columnNumber:11},void 0)}}}],oe=()=>{const{loggedInUser:l,roles:s}=I(t=>t.auth),[n,i]=u.useState([]),[D,j]=u.useState(!0),[S,r]=d.exports.useState(!1),[g,p]=d.exports.useState(""),{enqueueSnackbar:N}=U(),y=async()=>{const t=`${v}school`;await x.post(t,{name:g}).then(c=>{p(""),b(),r(!1),N("School successfully Added !",{variant:"success"})}).catch(()=>{N("Error Please fill the School Name!",{variant:"error"})})},E=()=>{r(!0)},V={selectableRows:"none",responsive:"vertical",filter:!1,customToolbar:u.useCallback(()=>e.exports.jsxDEV(q,{handleOpen:E},void 0,!1,{fileName:o,lineNumber:91,columnNumber:13},void 0),[])},b=async()=>{var t;try{const c=s.findIndex(a=>a.role==="Admin"),m=s.find(a=>a.role==="school"),C=((t=m==null?void 0:m.access)==null?void 0:t.map(a=>a.access))||[],k=`${v}school`,h=await x.get(k);i(c!==-1?[...h.data]:[...h.data.data.filter(a=>C.includes(a.id))]),j(!1)}catch{}};return d.exports.useEffect(()=>{(async()=>await b())()},[l]),e.exports.jsxDEV(W,{maxWidth:"sm",children:[e.exports.jsxDEV(P,{title:"School Name",columns:M,data:n,showLoader:D,options:V},void 0,!1,{fileName:o,lineNumber:126,columnNumber:7},void 0),e.exports.jsxDEV(T,{fullWidth:!0,open:S,onClose:()=>r(!1),children:e.exports.jsxDEV("section",{style:{padding:"0rem 1rem 1rem 1rem"},children:[e.exports.jsxDEV(A,{children:[e.exports.jsxDEV("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.exports.jsxDEV("p",{style:{fontSize:"24px"},children:"Create School"},void 0,!1,{fileName:o,lineNumber:147,columnNumber:15},void 0),e.exports.jsxDEV(B,{style:{cursor:"pointer"},onClick:()=>r(!1)},void 0,!1,{fileName:o,lineNumber:148,columnNumber:15},void 0)]},void 0,!0,{fileName:o,lineNumber:140,columnNumber:13},void 0),e.exports.jsxDEV(_,{fullWidth:!0,autoFocus:!0,label:"School Name",placeholder:"Enter School",variant:"outlined",sx:{mt:"0.4rem"},onChange:t=>{p(t.target.value)}},void 0,!1,{fileName:o,lineNumber:153,columnNumber:13},void 0)]},void 0,!0,{fileName:o,lineNumber:139,columnNumber:11},void 0),e.exports.jsxDEV($,{style:{display:"flex",justifyContent:"center"},children:e.exports.jsxDEV(F,{variant:"contained",color:"primary",style:{width:"94%",padding:".5rem"},onClick:y,children:"Create NEW School"},void 0,!1,{fileName:o,lineNumber:171,columnNumber:13},void 0)},void 0,!1,{fileName:o,lineNumber:165,columnNumber:11},void 0)]},void 0,!0,{fileName:o,lineNumber:138,columnNumber:9},void 0)},void 0,!1,{fileName:o,lineNumber:133,columnNumber:7},void 0)]},void 0,!0,{fileName:o,lineNumber:125,columnNumber:5},void 0)};export{oe as default};
