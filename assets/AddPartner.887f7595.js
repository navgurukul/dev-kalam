import{b9 as H,c9 as J,bf as K,bh as M,aI as j,r as Q,j as e,ba as X,cc as ee,bs as n,bq as N,aU as $,d6 as C,bp as b,d7 as A,d8 as R}from"./vendor.0db79331.js";import{a as V}from"./vendor_axios.5abceb0c.js";import{u as re,a as F,C as x}from"./vendor_react_hook_form.d8394e0d.js";import{c as q}from"./index.83743980.js";import"./vendor_core_js_pure.0c656a9d.js";import"./vendor_react_epic_spinners.9d092b60.js";import"./vendor_mui_datatables.7a9f4bd2.js";import"./vendor_lodash.50cc0a37.js";import"./vendor_react_slick.6e983608.js";import"./vendor_react_easy_edit.0ee73127.js";import"./vendor_react_player.4dedbcdd.js";var r="C:\\Users\\poona\\OneDrive\\Documents\\Poonam\\React\\Work\\kalam\\src\\components\\partner\\AddPartner.jsx";const y="https://dev-join.navgurukul.org/api/",te=H(l=>({container:{display:"flex",flexWrap:"wrap",flexDirection:"column",maxWidth:400},root:{maxWidth:450,margin:"auto",marginTop:"20px"},addIcon:{position:"absolute",marginLeft:"60%",top:"9px"},text:{marginBottom:l.spacing(1)},btn:{marginTop:l.spacing(4)}})),fe=({partnerId:l,closeDialog:W})=>{const d=te(),k=J(),{enqueueSnackbar:f}=K(),U=M(),T=()=>U(q(!0)),h=()=>U(q(!1)),[c,P]=j.useState({name:"",email:"",slug:"",notes:"",state:"",partnerEmail:"",partnerUsers:[{email:""}],districts:[""]}),{handleSubmit:w,formState:{errors:s},control:u,reset:S}=re(),{fields:z,append:L,remove:B}=F({control:u,name:"partnerUsers"}),{fields:Z,append:I,remove:_}=F({control:u,name:"districts"});Q.exports.useEffect(()=>{if(l){const i=`${y}partners/${l}`;V.get(i).then(t=>{const{data:a}=t.data;P(o=>({...o,name:a.name||"",email:a.email||"",slug:a.slug||"",notes:a.notes||"",state:a.state||"",partnerUsers:a.partnerUser||[{email:""}],districts:a.districts||[""]})),S({name:a.name||"",email:a.email||"",slug:a.slug||"",notes:a.notes||"",state:a.state||"",partnerUsers:a.partnerUser||[{email:""}],districts:a.districts||[""]})})}else S({...c,partnerUsers:[""],districts:[""]})},[]);const O=async i=>{const{name:t,email:a,notes:o,slug:v,partnerUsers:g,districts:E}=i,D=E.filter(p=>p.length>0);try{T();const p=` ${y}partners`,m=await V.post(p,{name:t,email:a,notes:o,slug:v,partner_user:g,districts:D},{headers:{Authorization:`Bearer ${localStorage.getItem("jwt")}`}});m.data.error?f(m.data.message,{variant:"error"}):(f("Partner details added Successfull!",{variant:"success"}),h(),k("/partners"))}catch{f("All fields are mandatory Or Slug should be unique",{variant:"error"}),h()}},Y=i=>{const{name:t,email:a,notes:o,partnerUsers:v,districts:g,state:E,slug:D}=i,p=g.filter(m=>m.length>0);V.put(`${y}partners/${l}`,{name:t,email:a||null,notes:o,slug:D,state:E||null,partner_user:v||null,districts:p.length>0?p:null}).then(m=>{m.data.error?f(`Something went wrong, ${m.data.message}`,{variant:"error"}):(f("Partner details Successfull edit",{variant:"success"}),h(),k("/partners"))}).catch(m=>{f(`Something went wrong, ${m}`,{variant:"error"})})},G=i=>{P(t=>({...t,...i})),l?Y(i):O(i)};return e.exports.jsxDEV(X,{component:ee,maxWidth:"sm",className:d.root,children:e.exports.jsxDEV(n,{container:!0,spacing:2,sx:{p:".4rem"},children:[e.exports.jsxDEV(n,{item:!0,xs:12,children:[e.exports.jsxDEV(x,{control:u,defaultValue:c.name||"",name:"name",rules:{required:!0,maxLength:40},render:({field:{ref:i,...t}})=>e.exports.jsxDEV(N,{variant:"outlined",fullWidth:!0,id:"name",inputRef:i,className:d.spacing,label:"Partner Name",placeholder:"Partner Name",autoComplete:"off",type:"text",error:!!s.name,helperText:s.name&&s.name.type==="maxLength"?"Length should be under 40 characters":"Partner ka Name Enter karein.",...t},void 0,!1,{fileName:r,lineNumber:254,columnNumber:15},void 0)},void 0,!1,{fileName:r,lineNumber:248,columnNumber:11},void 0),e.exports.jsxDEV(x,{control:u,defaultValue:c.email||"",name:"email",rules:{required:!0,pattern:/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/},render:({field:{ref:i,...t}})=>e.exports.jsxDEV(N,{variant:"outlined",fullWidth:!0,id:"email",inputRef:i,className:d.spacing,label:"Email",placeholder:"Email",autoComplete:"off",type:"email",style:{marginTop:"1rem"},error:!!s.email,helperText:s.email?s.email.type==="pattern"?"Please enter a valid email address":"Email ka Address Enter karein.":"Partner ka Email Enter karein.",...t},void 0,!1,{fileName:r,lineNumber:287,columnNumber:15},void 0)},void 0,!1,{fileName:r,lineNumber:277,columnNumber:11},void 0),e.exports.jsxDEV(x,{control:u,defaultValue:c.notes||"",name:"notes",rules:{required:!0},render:({field:{ref:i,...t}})=>e.exports.jsxDEV(N,{variant:"outlined",fullWidth:!0,id:"notes",inputRef:i,className:d.spacing,label:"Notes",placeholder:"Notes",autoComplete:"off",type:"text",style:{marginTop:"1rem"},error:!!s.notes,helperText:s.notes&&s.notes.type==="required"?"Please enter notes":"Partner ki thodi details add karein.",...t},void 0,!1,{fileName:r,lineNumber:319,columnNumber:15},void 0)},void 0,!1,{fileName:r,lineNumber:313,columnNumber:11},void 0),e.exports.jsxDEV(x,{control:u,defaultValue:c.slug||"",name:"slug",rules:{required:!0},render:({field:{ref:i,...t}})=>e.exports.jsxDEV(N,{variant:"outlined",fullWidth:!0,id:"slug",inputRef:i,className:d.spacing,label:"Slug",placeholder:"Slug",autoComplete:"off",type:"text",style:{marginTop:"1rem"},error:!!s.slug,helperText:s.slug&&s.slug.type==="required"?"Please enter slug":"Partner ke student ko online test dene ke liye Slug add karo.",...t},void 0,!1,{fileName:r,lineNumber:351,columnNumber:15},void 0)},void 0,!1,{fileName:r,lineNumber:345,columnNumber:11},void 0)]},void 0,!0,{fileName:r,lineNumber:247,columnNumber:9},void 0),z.map((i,t)=>{var a;return e.exports.jsxDEV(j.Fragment,{children:[e.exports.jsxDEV(n,{item:!0,xs:9,children:e.exports.jsxDEV(x,{control:u,defaultValue:((a=c.partnerUsers[t])==null?void 0:a.email)||"",name:`partnerUsers[${t}].email`,rules:{required:!0,pattern:/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/},render:({field:{ref:o,...v}})=>e.exports.jsxDEV(N,{variant:"outlined",fullWidth:!0,id:`partnerUsers[${t}]`,name:`partnerUsers[${t}]`,inputRef:o,label:`User Email ${t+1}`,placeholder:`User Email ${t+1}`,autoComplete:"off",type:"email",error:!!s.partnerUsers&&!!s.partnerUsers[t],helperText:s.name?"Required Field":`Enter Partner Email ${t+1}`,...v},void 0,!1,{fileName:r,lineNumber:390,columnNumber:19},void 0)},void 0,!1,{fileName:r,lineNumber:380,columnNumber:15},void 0)},void 0,!1,{fileName:r,lineNumber:379,columnNumber:13},void 0),e.exports.jsxDEV(n,{item:!0,xs:2,sx:{display:"flex",alignItems:"center",justifyContent:"left"},children:e.exports.jsxDEV($,{color:"primary",size:"large",onClick:()=>B(t),style:{borderSpacing:"-1"},children:e.exports.jsxDEV(C,{},void 0,!1,{fileName:r,lineNumber:432,columnNumber:17},void 0)},void 0,!1,{fileName:r,lineNumber:423,columnNumber:15},void 0)},void 0,!1,{fileName:r,lineNumber:414,columnNumber:13},void 0)]},i.id,!0,{fileName:r,lineNumber:378,columnNumber:11},void 0)}),e.exports.jsxDEV(n,{item:!0,xs:12,sx:{mY:"0.2rem"},children:e.exports.jsxDEV(b,{variant:"outlined",color:"primary",onClick:()=>L(),children:[e.exports.jsxDEV(A,{style:{display:"flex",alignItems:"center",marginRight:"1vh"},children:e.exports.jsxDEV(R,{},void 0,!1,{fileName:r,lineNumber:451,columnNumber:15},void 0)},void 0,!1,{fileName:r,lineNumber:443,columnNumber:13},void 0),"Add Another Email"]},void 0,!0,{fileName:r,lineNumber:438,columnNumber:11},void 0)},void 0,!1,{fileName:r,lineNumber:437,columnNumber:9},void 0),Z.map((i,t)=>e.exports.jsxDEV(j.Fragment,{children:[e.exports.jsxDEV(n,{item:!0,xs:9,children:e.exports.jsxDEV(x,{control:u,defaultValue:c.districts[t]||"",name:`districts[${t}]`,rules:{required:!0},render:({field:{ref:a,...o}})=>e.exports.jsxDEV(N,{variant:"outlined",fullWidth:!0,id:`districts[${t}]`,inputRef:a,label:`District ${t+1}`,placeholder:`District ${t+1}`,autoComplete:"off",type:"email",error:!!s.partnerUsers&&!!s.partnerUsers[t],helperText:s.name?"Required Field":`Enter District ${t+1}`,...o},void 0,!1,{fileName:r,lineNumber:465,columnNumber:19},void 0)},void 0,!1,{fileName:r,lineNumber:459,columnNumber:15},void 0)},void 0,!1,{fileName:r,lineNumber:458,columnNumber:13},void 0),e.exports.jsxDEV(n,{item:!0,xs:2,sx:{display:"flex",alignItems:"center",justifyContent:"left"},children:e.exports.jsxDEV($,{color:"primary",size:"large",onClick:()=>_(t),style:{borderSpacing:"-1"},children:e.exports.jsxDEV(C,{},void 0,!1,{fileName:r,lineNumber:506,columnNumber:17},void 0)},void 0,!1,{fileName:r,lineNumber:497,columnNumber:15},void 0)},void 0,!1,{fileName:r,lineNumber:488,columnNumber:13},void 0)]},i.id,!0,{fileName:r,lineNumber:457,columnNumber:11},void 0)),e.exports.jsxDEV(n,{item:!0,xs:12,sx:{mY:"0.2rem"},children:e.exports.jsxDEV(b,{variant:"outlined",color:"primary",onClick:()=>I(),children:[e.exports.jsxDEV(A,{style:{display:"flex",alignItems:"center",marginRight:"1vh"},children:e.exports.jsxDEV(R,{},void 0,!1,{fileName:r,lineNumber:525,columnNumber:15},void 0)},void 0,!1,{fileName:r,lineNumber:517,columnNumber:13},void 0),"Add Another District"]},void 0,!0,{fileName:r,lineNumber:512,columnNumber:11},void 0)},void 0,!1,{fileName:r,lineNumber:511,columnNumber:9},void 0),e.exports.jsxDEV(n,{item:!0,xs:l?6:12,children:e.exports.jsxDEV(b,{fullWidth:!0,variant:"contained",color:"primary",onClick:w(G),className:d.btn,children:l?"Update Partner":"Add Partner"},void 0,!1,{fileName:r,lineNumber:531,columnNumber:11},void 0)},void 0,!1,{fileName:r,lineNumber:530,columnNumber:9},void 0),l?e.exports.jsxDEV(n,{item:!0,xs:6,children:e.exports.jsxDEV(b,{fullWidth:!0,variant:"outlined",color:"primary",onClick:W,className:d.btn,children:"Cancel"},void 0,!1,{fileName:r,lineNumber:543,columnNumber:13},void 0)},void 0,!1,{fileName:r,lineNumber:542,columnNumber:11},void 0):null]},void 0,!0,{fileName:r,lineNumber:246,columnNumber:7},void 0)},void 0,!1,{fileName:r,lineNumber:245,columnNumber:5},void 0)};export{fe as default};
